<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_131) on Wed Aug 16 13:14:06 EDT 2017 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>SandboxTransformer (Groovy Sandbox 1.14 API)</title>
<meta name="date" content="2017-08-16">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SandboxTransformer (Groovy Sandbox 1.14 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":42,"i2":10,"i3":9,"i4":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"],32:["t6","Deprecated Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SandboxTransformer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/kohsuke/groovy/sandbox/GroovyValueFilter.html" title="class in org.kohsuke.groovy.sandbox"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/kohsuke/groovy/sandbox/SandboxTransformer.html" target="_top">Frames</a></li>
<li><a href="SandboxTransformer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.kohsuke.groovy.sandbox</div>
<h2 title="Class SandboxTransformer" class="title">Class SandboxTransformer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.codehaus.groovy.control.CompilationUnit.PrimaryClassNodeOperation</li>
<li>
<ul class="inheritance">
<li>org.codehaus.groovy.control.customizers.CompilationCustomizer</li>
<li>
<ul class="inheritance">
<li>org.kohsuke.groovy.sandbox.SandboxTransformer</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">SandboxTransformer</span>
extends org.codehaus.groovy.control.customizers.CompilationCustomizer</pre>
<div class="block">Transforms Groovy code at compile-time to intercept when the script interacts with the outside world.

 <p>
 Sometimes you'd like to run Groovy scripts in a sandbox environment, where you only want it to
 access limited subset of the rest of JVM. This transformation makes that possible by letting you inspect
 every step of the script execution when it makes method calls and property/field/array access.

 <p>
 Once the script is transformed, every intercepted operation results in a call to <a href="../../../../org/kohsuke/groovy/sandbox/impl/Checker.html" title="class in org.kohsuke.groovy.sandbox.impl"><code>Checker</code></a>,
 which further forwards the call to <a href="../../../../org/kohsuke/groovy/sandbox/GroovyInterceptor.html" title="class in org.kohsuke.groovy.sandbox"><code>GroovyInterceptor</code></a> for inspection.


 <p>
 To use it, add it to the <code>CompilerConfiguration</code>, like this:

 <pre>
 def cc = new CompilerConfiguration()
 cc.addCompilationCustomizers(new SandboxTransformer())
 sh = new GroovyShell(cc)
 </pre>

 <p>
 By default, this code intercepts everything that can be intercepted, which are:
 <ul>
     <li>Method calls (instance method and static method)
     <li>Object allocation (that is, a constructor call except of the form "this(...)" and "super(...)")
     <li>Property access (e.g., z=foo.bar, z=foo."bar") and assignment (e.g., foo.bar=z, foo."bar"=z)
     <li>Attribute access (e.g., z=foo.@bar) and assignments (e.g., foo.@bar=z)
     <li>Array access and assignment (z=x[y] and x[y]=z)
 </ul>
 <p>
 You can disable interceptions selectively by setting respective <code>interceptXXX</code> flags to <code>false</code>.

 <p>
 There'll be a substantial hit to the performance of the execution.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Kohsuke Kawaguchi</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/kohsuke/groovy/sandbox/SandboxTransformer.html#SandboxTransformer--">SandboxTransformer</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t6" class="tableTab"><span><a href="javascript:show(32);">Deprecated Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/kohsuke/groovy/sandbox/SandboxTransformer.html#call-org.codehaus.groovy.control.SourceUnit-org.codehaus.groovy.classgen.GeneratorContext-org.codehaus.groovy.ast.ClassNode-">call</a></span>(org.codehaus.groovy.control.SourceUnit&nbsp;source,
    org.codehaus.groovy.classgen.GeneratorContext&nbsp;context,
    org.codehaus.groovy.ast.ClassNode&nbsp;classNode)</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>org.codehaus.groovy.ast.ClassCodeExpressionTransformer</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/kohsuke/groovy/sandbox/SandboxTransformer.html#createVisitor-org.codehaus.groovy.control.SourceUnit-">createVisitor</a></span>(org.codehaus.groovy.control.SourceUnit&nbsp;source)</code>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>org.codehaus.groovy.ast.ClassCodeExpressionTransformer</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/kohsuke/groovy/sandbox/SandboxTransformer.html#createVisitor-org.codehaus.groovy.control.SourceUnit-org.codehaus.groovy.ast.ClassNode-">createVisitor</a></span>(org.codehaus.groovy.control.SourceUnit&nbsp;source,
             org.codehaus.groovy.ast.ClassNode&nbsp;clazz)</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/kohsuke/groovy/sandbox/SandboxTransformer.html#mightBePositionalArgumentConstructor-org.codehaus.groovy.ast.expr.VariableExpression-">mightBePositionalArgumentConstructor</a></span>(org.codehaus.groovy.ast.expr.VariableExpression&nbsp;ve)</code>
<div class="block">Checks if a <code>DeclarationExpression.getVariableExpression()</code> might induce <code>DefaultTypeTransformation.castToType(java.lang.Object, java.lang.Class)</code> to call a constructor.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/kohsuke/groovy/sandbox/SandboxTransformer.html#processConstructors-org.codehaus.groovy.ast.ClassCodeExpressionTransformer-org.codehaus.groovy.ast.ClassNode-">processConstructors</a></span>(org.codehaus.groovy.ast.ClassCodeExpressionTransformer&nbsp;visitor,
                   org.codehaus.groovy.ast.ClassNode&nbsp;classNode)</code>
<div class="block">Apply SECURITY-582 fix to constructors.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.codehaus.groovy.control.customizers.CompilationCustomizer">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.codehaus.groovy.control.customizers.CompilationCustomizer</h3>
<code>getPhase</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.codehaus.groovy.control.CompilationUnit.PrimaryClassNodeOperation">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.codehaus.groovy.control.CompilationUnit.PrimaryClassNodeOperation</h3>
<code>needSortedInput</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="SandboxTransformer--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SandboxTransformer</h4>
<pre>public&nbsp;SandboxTransformer()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="call-org.codehaus.groovy.control.SourceUnit-org.codehaus.groovy.classgen.GeneratorContext-org.codehaus.groovy.ast.ClassNode-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>call</h4>
<pre>public&nbsp;void&nbsp;call(org.codehaus.groovy.control.SourceUnit&nbsp;source,
                 org.codehaus.groovy.classgen.GeneratorContext&nbsp;context,
                 org.codehaus.groovy.ast.ClassNode&nbsp;classNode)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>call</code>&nbsp;in class&nbsp;<code>org.codehaus.groovy.control.CompilationUnit.PrimaryClassNodeOperation</code></dd>
</dl>
</li>
</ul>
<a name="processConstructors-org.codehaus.groovy.ast.ClassCodeExpressionTransformer-org.codehaus.groovy.ast.ClassNode-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processConstructors</h4>
<pre>public&nbsp;void&nbsp;processConstructors(org.codehaus.groovy.ast.ClassCodeExpressionTransformer&nbsp;visitor,
                                org.codehaus.groovy.ast.ClassNode&nbsp;classNode)</pre>
<div class="block">Apply SECURITY-582 fix to constructors.</div>
</li>
</ul>
<a name="createVisitor-org.codehaus.groovy.control.SourceUnit-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createVisitor</h4>
<pre><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Deprecated.html?is-external=true" title="class or interface in java.lang">@Deprecated</a>
public&nbsp;org.codehaus.groovy.ast.ClassCodeExpressionTransformer&nbsp;createVisitor(org.codehaus.groovy.control.SourceUnit&nbsp;source)</pre>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;</div>
</li>
</ul>
<a name="createVisitor-org.codehaus.groovy.control.SourceUnit-org.codehaus.groovy.ast.ClassNode-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createVisitor</h4>
<pre>public&nbsp;org.codehaus.groovy.ast.ClassCodeExpressionTransformer&nbsp;createVisitor(org.codehaus.groovy.control.SourceUnit&nbsp;source,
                                                                            org.codehaus.groovy.ast.ClassNode&nbsp;clazz)</pre>
</li>
</ul>
<a name="mightBePositionalArgumentConstructor-org.codehaus.groovy.ast.expr.VariableExpression-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>mightBePositionalArgumentConstructor</h4>
<pre>public static&nbsp;boolean&nbsp;mightBePositionalArgumentConstructor(org.codehaus.groovy.ast.expr.VariableExpression&nbsp;ve)</pre>
<div class="block">Checks if a <code>DeclarationExpression.getVariableExpression()</code> might induce <code>DefaultTypeTransformation.castToType(java.lang.Object, java.lang.Class)</code> to call a constructor.
 If so, <a href="../../../../org/kohsuke/groovy/sandbox/impl/Checker.html#checkedCast-java.lang.Class-java.lang.Object-boolean-boolean-boolean-"><code>Checker.checkedCast(java.lang.Class&lt;?&gt;, java.lang.Object, boolean, boolean, boolean)</code></a> should be run.
 Will be false for example if the declared type is an array, <code>abstract</code>, or unspecified (just <code>def</code>).
 Not yet supporting <code>DeclarationExpression.getTupleExpression()</code> on LHS;
 and currently ignoring <code>BinaryExpression.getRightExpression()</code> though some might not possibly be arrays, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util"><code>Collection</code></a>s, or <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util"><code>Map</code></a>s.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SandboxTransformer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/kohsuke/groovy/sandbox/GroovyValueFilter.html" title="class in org.kohsuke.groovy.sandbox"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/kohsuke/groovy/sandbox/SandboxTransformer.html" target="_top">Frames</a></li>
<li><a href="SandboxTransformer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2017. All rights reserved.</small></p>
</body>
</html>
